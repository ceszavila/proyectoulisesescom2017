%!TEX encoding = UTF-8 Unicode

\begin{UseCase}{CUS 21}{Actualizar información del consumo de agua}
    {
	  Este caso de uso permite al actor actualizar la información referente al consumo de agua. Una vez que los datos solicitados para la actualización de la información del consumo de agua han sido ingresados, el sistema valida la información y esta queda registrada.
    }
    
    \UCitem{Versión}{1.0}
    \UCccsection{Administración de Requerimientos}
    \UCitem{Autor}{Jessica Stephany Becerril Delgado}
    \UCccitem{Evaluador}{}
    \UCitem{Operación}{Registro}
    \UCccitem{Prioridad}{Media}
    \UCccitem{Complejidad}{Media}
    \UCccitem{Volatilidad}{Media}
    \UCccitem{Madurez}{Media}
    \UCitem{Estatus}{Terminado}
    \UCitem{Fecha del último estatus}{5 de Diciembre del 2014}

%% Copie y pegue este bloque tantas veces como revisiones tenga el caso de uso.
%% Esta sección la debe llenar solo el Revisor
% %--------------------------------------------------------
 	\UCccsection{Revisión Versión 0.1} % Anote la versión que se revisó.
% 	% FECHA: Anote la fecha en que se terminó la revisión.
 	\UCccitem{Fecha}{9-Dic} 
% 	% EVALUADOR: Coloque el nombre completo de quien realizó la revisión.
 	\UCccitem{Evaluador}{Nayeli Vega}
% 	% RESULTADO: Coloque la palabra que mas se apegue al tipo de acción que el analista debe realizar.
 	\UCccitem{Resultado}{Corregir}
% 	% OBSERVACIONES: Liste los cambios que debe realizar el Analista.
 	\UCccitem{Observaciones}{
 		\begin{UClist}
% 			% PC: Petición de Cambio, describa el trabajo a realizar, si es posible indique la causa de la PC. Opcionalmente especifique la fecha en que considera razonable que se deba terminar la PC. No olvide que la numeración no se debe reiniciar en una segunda o tercera revisión.
 			\RCitem{PC1}{\TOCHK{Agregar precondiciones, mensajes, pasos a la trayectoria y trayectorias alternativas}}{Fecha de entrega}
 			\RCitem{PC2}{\TOCHK{El avance acumulado no se calcula, paso de la trayectoria va abajo después de verificar información}}{Fecha de entrega}
 			\RCitem{PC3}{\TOCHK{Revisar trayectoria principal}}{Fecha de entrega} 			
 			\RCitem{PC3}{\TOCHK{Agregar trayectoria de Cancelar}}{Fecha de entrega}
 			\RCitem{PC4}{\TOCHK{Agregar paso a la trayectoria en donde se verifica el formato de la información}}{Fecha de entrega} 			
			\RCitem{PC5}{\TOCHK{Sección de salidas, no las obtiene el sistema, las únicas salidas son Tipos de abastecimient y Consumo e importe totales}}{Fecha de entrega} 			
			\RCitem{PC4}{\TOCHK{Entradas: hay que consderar la pregunta de ¿Han cambiado los tipos de abastecimiento de agua con los que cuenta la escuela?}}{Fecha de entrega} 			
			\RCitem{PC4}{\TOCHK{Entradas: hay que consderar la pregunta de ¿Cuenta con recibos sobre el consumo de agua?}}{Fecha de entrega} 					
			\RCitem{PC4}{\TOCHK{Trayectoria principal: Considero que la primera verificación que se tiene que hacer es la del estado de la escuela y de la fecha, posteriormente las demás, de lo contrario, de no cumplirse no tendría sentido haber hecho las otras}}{Fecha de entrega} 			
			\RCitem{PC4}{\TOCHK{Interfaz: Agregar mensajes a la interfaz, 28 y 41}}{Fecha de entrega} 
 			
 		\end{UClist}		
 	}
% %-----

    \UCsection{Atributos}
    \UCitem{Actor}{\cdtRef{actor:usuarioEscuela}{Coordinador del programa}}
    \UCitem{Propósito}{Actualizar la información referente al consumo de agua.}
    \UCitem{Entradas}{
	\begin{UClist}
	    \UCli Información del consumo y abastecimiento de agua:
	    \begin{itemize}
	    \item \cdtRef{consumo-agua:tipoAbastecimiento}{Tipos de abastecimiento de agua}: \ioCheckBox.
	    \item \cdtRef{consumo-agua:recibos}{Recibos de agua}: \ioRadioBoton.
	    \item \cdtRef{consumo-agua:tipoDePeriodo}{Tipo de periodo}: \ioSeleccionar.	    
	    \item \cdtRef{mensual:mes}{Mes}: \ioSeleccionar.
	    \item \cdtRef{bimestral:bimestre}{Bimestre}: \ioSeleccionar.
	    \item \cdtRef{semestral:semestre}{Semestre}: \ioSeleccionar.
	    \item \cdtRef{periodo-consumo:Anio}{Año}: \ioSeleccionar.	    
	    \item \cdtRef{periodo-consumo:consumo}{Consumo por tipo de periodo}: \ioEscribir.
	    \item \cdtRef{periodo-consumo:importe}{Importe por tipo de periodo}: \ioEscribir.
	    
	    \item Consumo total: \ioCalcular \cdtIdRef{RN-N12}{Calcular consumo total}.
	    \item Importe total: \ioCalcular \cdtIdRef{RN-N13}{Calcular importe total}.
	    \end{itemize}
	\end{UClist}
    }

    \UCitem{Salidas}{
	\begin{UClist}
	    \UCli Información del consumo y abastecimiento de agua:
	    \begin{itemize}
	    \item \cdtRef{consumo-agua:tipoAbastecimiento}{Tipos de abastecimiento de agua}: \ioObtener.
	    
	    \item Consumo total: \ioCalcular \cdtIdRef{RN-N12}{Calcular consumo total}.
	    \item Importe total: \ioCalcular \cdtIdRef{RN-N13}{Calcular importe total}.
	    \end{itemize}

	    \UCli \cdtIdRef{MSG1}{Operación realizada exitosamente:} Se muestra en la pantalla \cdtIdRef{IUS 18}{Administrar avances de agua} cuando la actualización de la información del consumo de agua se ha realizado correctamente.
	\end{UClist}
    }

    \UCitem{Precondiciones}{
	\begin{UClist}
	     \UCli {\bf Interna:} Que la escuela se encuentre en estado \cdtRef{estado:avanceEdicion}{Avance en edición}.
	    \UCli {\bf Interna:} Que el periodo de registros de avances se encuentre vigente.
	\end{UClist}
    }
    
    \UCitem{Postcondiciones}{
	\begin{UClist}
	    \UCli {\bf Interna:} La información del consumo de agua estará actualizada.
	\end{UClist}
    }
    
    \UCitem{Reglas de negocio}{
    	\begin{UClist}
	    \UCli \cdtIdRef{RN-S1}{Información correcta}: Verifica que la información introducida sea correcta.
	    \UCli \cdtIdRef{RN-N12}{Calcular consumo total}: Calcula el consumo total de agua con base en la información ingresada de los recibos.
	    \UCli \cdtIdRef{RN-N13}{Calcular importe total}: Calcula el importe total de agua con base en la información ingresada de los recibos.
	\end{UClist}
    }
    
    \UCitem{Errores}{
	\begin{UClist}
	    \UCli \cdtIdRef{MSG4}{No se encontró información sustantiva}: Se muestra en la pantalla \cdtIdRef{IUS 18}{Administrar avances de agua} cuando el sistema no cuenta con información en los catálogos de bimestre o año.
	    
	    \UCli \cdtIdRef{MSG5}{Falta un dato requerido para efectuar la operación solicitada}: Se muestra en la pantalla \cdtIdRef{IUS 21}{Actualizar información del consumo de agua} cuando no se ha ingresado un dato marcado como requerido.
	    
	    \UCli \cdtIdRef{MSG6}{Formato incorrecto}: Se muestra en la pantalla \cdtIdRef{IUS 21}{Actualizar información del consumo de agua} cuando el tipo de dato ingresado no cumple con el tipo de dato solicitado en el campo.
	    
	    \UCli \cdtIdRef{MSG7}{Se ha excedido la longitud máxima del campo}: Se muestra en la pantalla \cdtIdRef{IUS 21}{Actualizar información del consumo de agua} cuando se ha excedido la longitud de alguno de los campos.	    
	    
	    \UCli  \cdtIdRef{MSG28}{Operación no permitida por estado de la entidad}: Se muestra en la pantalla \cdtIdRef{IUS 18}{Administrar avances de agua} indicando al actor que no se puede realizar la operación debido al estado en que se encuentra la escuela.
	    
	    \UCli \cdtIdRef{MSG41}{Acción fuera del periodo}: Se muestra en la pantalla \cdtIdRef{IUS 18}{Administrar avances de agua} para indicarle al actor que no puede realizar la operación debido a que la fecha actual se encuentra fuera del periodo definido por la SMAGEM para realizarla.
	    
	\end{UClist}
    }

    \UCitem{Tipo}{Secundario, extiende del caso de uso \cdtIdRef{CUS 18}{Administrar avances de agua}.}

%    \UCitem{Fuente}{
%	\begin{UClist}
%	    \UCli Minuta de la reunión \cdtIdRef{M-17RT}{Reunión de trabajo}.
%	\end{UClist}
%    }
\end{UseCase}

\begin{UCtrayectoria}
    \UCpaso[\UCactor] Solicita actualizar la información referente al consumo de agua oprimiendo el botón \cdtButton{Actualizar} de la pantalla \cdtIdRef{IUS 18}{Administrar avances de agua}.
    \UCpaso[\UCsist] Verifica que la escuela se encuentre en estado ``Avance en edición''. \refTray{A}.
    \UCpaso[\UCsist] Verifica que la fecha actual se encuentre dentro del periodo definido por la SMAGEM para realizar la operación. \refTray{B}.
    \UCpaso[\UCsist] Busca la información referente a los catálogos tipo de periodo, mes, bimestre, semestre y año. \refTray{C}.
    \UCpaso[\UCsist] Busca la información previamente registrada referente a la información del consumo de agua.
    \UCpaso[\UCsist] Muestra la pantalla \cdtIdRef{IUS 21}{Actualizar información del consumo de agua} por medio de la cual se realizará la actualización de información del consumo de agua.
    \UCpaso[\UCactor] Ingresa los datos referentes a la actualización de información del consumo de agua en la pantalla \cdtIdRef{IUS 21}{Actualizar información del consumo de agua}. \label{cus21:IngresarDatos}
    \UCpaso[\UCactor] Oprime el botón \cdtButton{Aceptar} en la pantalla \cdtIdRef{IUS 21}{Actualizar información del consumo de agua} para confirmar la actualización de la información de consumo de agua. \refTray{D}. 
    \UCpaso[\UCsist] Verifica que la escuela se encuentre en estado ``Avance en edición''. \refTray{A}.
    \UCpaso[\UCsist] Verifica que la fecha actual se encuentre dentro del periodo definido por la SMAGEM para realizar la operación. \refTray{B}.
    \UCpaso[\UCsist] Verifica que los datos ingresados proporcionen información correcta con base en la regla de negocio \cdtIdRef{RN-S1}{Información correcta}. \refTray{E}. \refTray{F}. \refTray{G}.    
    \UCpaso[\UCsist] Registra la actualización de información referente al consumo de agua.
    \UCpaso[\UCsist] Muestra el mensaje \cdtIdRef{MSG1}{Operación realizada exitosamente} en la pantalla \cdtIdRef{IUS 18}{Administrar avances de agua} para indicar al actor que la actualización de la información del consumo de agua se ha realizado exitosamente.    
 \end{UCtrayectoria}
 
     \begin{UCtrayectoriaA}[Fin del caso de uso]{A}{La escuela no se encuentra en un estado que permita realizar la operación.}
	\UCpaso[\UCsist] Muestra el mensaje \cdtIdRef{MSG28}{Operación no permitida por estado de la entidad} en la pantalla \cdtIdRef{IUS 18}{Administrar avances de agua} indicando al actor que no puede realizar la operación debido a que la escuela no se encuentra en estado ``Avance en edición''. 
    \end{UCtrayectoriaA}
 
 \begin{UCtrayectoriaA}[Fin del caso de uso]{B}{La fecha actual se encuentra fuera del periodo definido por la SMAGEM para realizar la operación.}
    \UCpaso[\UCsist] Muestra el mensaje \cdtIdRef{MSG41}{Acción fuera del periodo} en la pantalla \cdtIdRef{IUS 18}{Administrar avances de agua} indicando al actor que no puede realizar la operación debido a que la fecha actual se encuentra fuera del periodo definido por la SMAGEM para realizarla. 
 \end{UCtrayectoriaA}
 
  \begin{UCtrayectoriaA}[Fin del caso de uso]{C}{No existe información base en los catálogos de tipo de periodo, mes, bimestre, semestre o año.}
    \UCpaso[\UCsist] Muestra el mensaje \cdtIdRef{MSG4}{No se encontró información sustantiva} en la pantalla \cdtIdRef{IUS 18}{Administrar avances de agua} indicando al actor que no puede actualizar la información del consumo de agua debido a que no se cuenta con información sustantiva para los catálogos de tipo de periodo, mes, bimestre, semestre y año.
 \end{UCtrayectoriaA}
 
    \begin{UCtrayectoriaA}[Fin del caso de uso]{D}{El actor desea cancelar la operación.}
    \UCpaso[\UCactor] Solicita cancelar la operación oprimiendo el botón \cdtButton{Cancelar} en la pantalla \cdtIdRef{IUS 21}{Actualizar información del consumo de agua}.
    \UCpaso[] Regresa a la pantalla \cdtIdRef{IUS 18}{Administrar avances de agua}. 
    \end{UCtrayectoriaA}
  
    \begin{UCtrayectoriaA}{E}{El actor no ingresó un dato marcado como requerido.}    
    \UCpaso[\UCsist] Muestra el mensaje \cdtIdRef{MSG5}{Falta un dato requerido para efectuar la operación solicitada} en la pantalla \cdtIdRef{IUS 21}{Actualizar información del consumo de agua} indicando que la actualización de información del consumo de agua no puede realizarse debido a la falta de información requerida.
    \UCpaso[] Continúa con el paso \ref{cus21:IngresarDatos} de la trayectoria principal.     
    \end{UCtrayectoriaA}
 
        \begin{UCtrayectoriaA}{F}{El actor ingresó un tipo de dato incorrecto.}    
    \UCpaso[\UCsist] Muestra el mensaje \cdtIdRef{MSG6}{Formato incorrecto} en la pantalla \cdtIdRef{IUS 21}{Actualizar información del consumo de agua} indicando que la actualización de información referente al consumo de agua no puede realizarse debido a que la información ingresada no es correcta.
    \UCpaso[] Continúa con el paso \ref{cus21:IngresarDatos} de la trayectoria principal.     
    \end{UCtrayectoriaA}
    
    \begin{UCtrayectoriaA}{G}{El actor ingresó un dato que excede la longitud máxima.}    
    \UCpaso[\UCsist] Muestra el mensaje \cdtIdRef{MSG7}{Se ha excedido la longitud máxima del campo} en la pantalla \cdtIdRef{IUS 21}{Actualizar información del consumo de agua} indicando que el registro de información referente al consumo de agua no puede realizarse debido a que la longitud del campo excede la longitud máxima definida.
    \UCpaso[] Continúa con el paso \ref{cus21:IngresarDatos} de la trayectoria principal.     
    \end{UCtrayectoriaA}